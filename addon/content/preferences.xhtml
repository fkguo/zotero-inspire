<linkset>
  <html:link rel="localization" href="__addonRef__-preferences.ftl" />
</linkset>
<!-- Preferences -->
<preferences>
  <preference id="pref-meta" name="__prefsPrefix__.meta" type="string" />
  <preference id="pref-citekey" name="__prefsPrefix__.citekey" type="string" />
  <preference id="pref-extra_order" name="__prefsPrefix__.extra_order" type="string" />
  <preference id="pref-arxiv_tag_enable" name="__prefsPrefix__.arxiv_tag_enable" type="bool" />
  <preference id="pref-max_authors" name="__prefsPrefix__.max_authors" type="int" />
  <preference id="pref-chart_enable" name="__prefsPrefix__.chart_enable" type="bool" />
  <preference id="pref-chart_default_collapsed" name="__prefsPrefix__.chart_default_collapsed" type="bool" />
  <preference id="pref-search_history_days" name="__prefsPrefix__.search_history_days" type="int" />
  <preference id="pref-pdf_fuzzy_citation" name="__prefsPrefix__.pdf_fuzzy_citation" type="bool" />
  <preference id="pref-pdf_parse_refs_list" name="__prefsPrefix__.pdf_parse_refs_list" type="bool" />
  <preference id="pref-pdf_force_mapping_on_mismatch" name="__prefsPrefix__.pdf_force_mapping_on_mismatch" type="bool" />
  <preference id="pref-reader_auto_reopen" name="__prefsPrefix__.reader_auto_reopen" type="bool" />
  <preference id="pref-tag_enable" name="__prefsPrefix__.tag_enable" type="bool" />
  <preference id="pref-tag_norecid" name="__prefsPrefix__.tag_norecid" type="string" />
  <preference id="pref-local_cache_enable" name="__prefsPrefix__.local_cache_enable" type="bool" />
  <preference id="pref-local_cache_ttl_hours" name="__prefsPrefix__.local_cache_ttl_hours" type="int" />
  <preference id="pref-local_cache_show_source" name="__prefsPrefix__.local_cache_show_source" type="bool" />
  <preference id="pref-local_cache_custom_dir" name="__prefsPrefix__.local_cache_custom_dir" type="string" />
  <preference id="pref-local_cache_compression" name="__prefsPrefix__.local_cache_compression" type="bool" />
  <preference id="pref-local_cache_enrich_batch" name="__prefsPrefix__.local_cache_enrich_batch" type="int" />
  <preference id="pref-local_cache_enrich_parallel" name="__prefsPrefix__.local_cache_enrich_parallel" type="int" />
</preferences>
<groupbox onload="Zotero.__addonInstance__.hooks.onPrefsEvent('load', { window });" />
<vbox id="zotero-prefpane-__addonRef__" style="padding: 8px;">
  <html:style>
    .zinspire-pref-section {
    margin-bottom: 16px;
    padding: 12px 16px;
    background: var(--material-background, #f8fafc);
    border: 1px solid var(--fill-tertiary, #e2e8f0);
    border-radius: 8px;
    }
    .zinspire-pref-section:last-of-type {
    margin-bottom: 8px;
    }
    .zinspire-pref-title {
    font-size: 14px;
    font-weight: 600;
    color: var(--fill-primary, #1e293b);
    margin: 0 0 10px 0;
    padding-bottom: 6px;
    border-bottom: 1px solid var(--fill-quinary, #e2e8f0);
    }
    .zinspire-pref-desc {
    font-size: 11px;
    color: var(--fill-secondary, #64748b);
    margin-top: 4px;
    margin-left: 20px;
    }
    .zinspire-pref-row {
    margin-bottom: 8px;
    }
    .zinspire-pref-row:last-child {
    margin-bottom: 0;
    }
    .zinspire-pref-input {
    padding: 4px 8px;
    border: 1px solid var(--fill-tertiary, #cbd5e1);
    border-radius: 4px;
    background: var(--material-background, white);
    }
    .zinspire-pref-footer {
    font-size: 11px;
    color: var(--fill-secondary, #94a3b8);
    text-align: center;
    padding: 8px;
    border-top: 1px solid var(--fill-quinary, #e2e8f0);
    margin-top: 8px;
    }
    .zinspire-pref-hbox {
    display: flex;
    gap: 16px;
    }
    .zinspire-pref-hbox-item {
    flex: 1;
    }
  </html:style>

  <!-- Metadata Fetching -->
  <vbox class="zinspire-pref-section">
    <html:h3 class="zinspire-pref-title" data-l10n-id="pref-meta"></html:h3>
    <radiogroup id="zotero-prefpane-__addonRef__-meta" preference="extensions.zotero.inspiremeta.meta"
      orient="vertical">
      <radio data-l10n-id="meta-full" value="full" />
      <radio data-l10n-id="meta-noabstract" value="noabstract" />
      <radio data-l10n-id="meta-citations" value="citations" />
      <radio data-l10n-id="meta-no" value="no" />
    </radiogroup>
  </vbox>

  <!-- Citekey and Extra Field Order -->
  <vbox class="zinspire-pref-section">
    <hbox class="zinspire-pref-hbox">
      <vbox class="zinspire-pref-hbox-item">
        <html:h3 class="zinspire-pref-title" data-l10n-id="pref-citekey"></html:h3>
        <radiogroup id="zotero-prefpane-__addonRef__-citekey" preference="extensions.zotero.inspiremeta.citekey" orient="vertical">
          <radio data-l10n-id="citekey-inspire" value="inspire" />
          <radio data-l10n-id="citekey-no" value="no" />
        </radiogroup>
      </vbox>
      <vbox class="zinspire-pref-hbox-item">
        <html:h3 class="zinspire-pref-title" data-l10n-id="pref-extra-order"></html:h3>
        <radiogroup id="zotero-prefpane-__addonRef__-extra_order" preference="extensions.zotero.inspiremeta.extra_order"
          orient="vertical">
          <radio data-l10n-id="extra-order-citations-first" value="citations_first" />
          <radio data-l10n-id="extra-order-arxiv-first" value="arxiv_first" />
        </radiogroup>
      </vbox>
    </hbox>
  </vbox>

  <!-- arXiv Tag -->
  <vbox class="zinspire-pref-section">
    <html:h3 class="zinspire-pref-title" data-l10n-id="pref-arxiv-tag"></html:h3>
    <vbox class="zinspire-pref-row">
      <checkbox id="zotero-prefpane-__addonRef__-arxiv_tag_enable" preference="extensions.zotero.inspiremeta.arxiv_tag_enable"
        data-l10n-id="pref-arxiv-tag1" />
    </vbox>
  </vbox>

  <!-- References Panel Settings -->
  <vbox class="zinspire-pref-section">
    <html:h3 class="zinspire-pref-title" data-l10n-id="pref-refs-panel"></html:h3>
    <vbox class="zinspire-pref-row">
      <hbox align="center">
        <label data-l10n-id="pref-max-authors-label" />
        <html:input type="number" id="zotero-prefpane-__addonRef__-max_authors" preference="extensions.zotero.inspiremeta.max_authors"
          min="1" max="20" class="zinspire-pref-input" style="width: 60px; margin-left: 8px;" />
      </hbox>
      <html:p class="zinspire-pref-desc" data-l10n-id="pref-max-authors-desc"></html:p>
    </vbox>
    <vbox class="zinspire-pref-row" style="margin-top: 8px;">
      <checkbox id="zotero-prefpane-__addonRef__-chart_enable" preference="extensions.zotero.inspiremeta.chart_enable"
        data-l10n-id="pref-chart-enable" />
      <html:p class="zinspire-pref-desc" data-l10n-id="pref-chart-enable-desc"></html:p>
      <vbox style="margin-left: 20px; margin-top: 6px;">
        <checkbox id="zotero-prefpane-__addonRef__-chart_default_collapsed"
          preference="extensions.zotero.inspiremeta.chart_default_collapsed" data-l10n-id="pref-chart-default-collapsed" />
      </vbox>
    </vbox>
    <vbox class="zinspire-pref-row" style="margin-top: 12px;">
      <hbox align="center">
        <button id="zotero-prefpane-__addonRef__-clear_history" data-l10n-id="pref-search-history-clear"
          oncommand="Zotero.__addonInstance__.hooks.onPrefsEvent('clearHistory', { window });" />
        <label style="width: 20px;" />
        <label data-l10n-id="pref-search-history-days-label" />
        <html:input type="number" id="zotero-prefpane-__addonRef__-search_history_days"
          preference="extensions.zotero.inspiremeta.search_history_days" min="1" max="365"
          class="zinspire-pref-input" style="width: 60px; margin-left: 8px;" />
      </hbox>
    </vbox>
    <vbox class="zinspire-pref-row" style="margin-top: 8px;">
      <checkbox id="zotero-prefpane-__addonRef__-pdf_fuzzy_citation" preference="extensions.zotero.inspiremeta.pdf_fuzzy_citation"
        data-l10n-id="pref-pdf-fuzzy-citation" />
      <html:p class="zinspire-pref-desc" data-l10n-id="pref-pdf-fuzzy-citation-desc"></html:p>
    </vbox>
    <vbox class="zinspire-pref-row" style="margin-top: 8px;">
      <checkbox id="zotero-prefpane-__addonRef__-pdf_parse_refs_list" preference="extensions.zotero.inspiremeta.pdf_parse_refs_list"
        data-l10n-id="pref-pdf-parse-refs-list" />
      <html:p class="zinspire-pref-desc" data-l10n-id="pref-pdf-parse-refs-list-desc"></html:p>
    </vbox>
    <vbox class="zinspire-pref-row" style="margin-top: 8px; margin-left: 20px;">
      <checkbox id="zotero-prefpane-__addonRef__-pdf_force_mapping_on_mismatch" preference="extensions.zotero.inspiremeta.pdf_force_mapping_on_mismatch"
        data-l10n-id="pref-pdf-force-mapping" />
      <html:p class="zinspire-pref-desc" data-l10n-id="pref-pdf-force-mapping-desc"></html:p>
    </vbox>
  </vbox>

  <!-- Reader History -->
  <vbox class="zinspire-pref-section">
    <html:h3 class="zinspire-pref-title" data-l10n-id="pref-reader-history"></html:h3>
    <vbox class="zinspire-pref-row">
      <checkbox id="zotero-prefpane-__addonRef__-reader_auto_reopen" preference="extensions.zotero.inspiremeta.reader_auto_reopen"
        data-l10n-id="pref-reader-auto-reopen" />
      <html:p class="zinspire-pref-desc" data-l10n-id="pref-reader-auto-reopen-desc"></html:p>
    </vbox>
  </vbox>

  <!-- Local Cache Settings -->
  <vbox class="zinspire-pref-section">
    <html:h3 class="zinspire-pref-title" data-l10n-id="pref-local-cache"></html:h3>
    <vbox class="zinspire-pref-row">
      <checkbox id="zotero-prefpane-__addonRef__-local_cache_enable" preference="extensions.zotero.inspiremeta.local_cache_enable"
        data-l10n-id="pref-local-cache-enable" />
      <html:p class="zinspire-pref-desc" data-l10n-id="pref-local-cache-enable-desc"></html:p>
    </vbox>
    <vbox class="zinspire-pref-row" style="margin-top: 8px; margin-left: 20px;">
      <checkbox id="zotero-prefpane-__addonRef__-local_cache_show_source"
        preference="extensions.zotero.inspiremeta.local_cache_show_source" data-l10n-id="pref-local-cache-show-source" />
    </vbox>
    <vbox class="zinspire-pref-row" style="margin-top: 8px; margin-left: 20px;">
      <checkbox id="zotero-prefpane-__addonRef__-local_cache_compression"
        preference="extensions.zotero.inspiremeta.local_cache_compression" data-l10n-id="pref-local-cache-compression" />
      <html:p class="zinspire-pref-desc" data-l10n-id="pref-local-cache-compression-desc"></html:p>
    </vbox>
    <vbox class="zinspire-pref-row" style="margin-top: 8px; margin-left: 20px;">
      <html:h4 style="margin: 4px 0;" data-l10n-id="pref-local-cache-enrich-title"></html:h4>
      <html:p class="zinspire-pref-desc" data-l10n-id="pref-local-cache-enrich-desc"></html:p>
      <hbox align="center" style="margin-top: 6px;">
        <label data-l10n-id="pref-local-cache-enrich-batch-label" />
        <html:input type="number" id="zotero-prefpane-__addonRef__-local_cache_enrich_batch"
          preference="extensions.zotero.inspiremeta.local_cache_enrich_batch" min="25" max="110"
          class="zinspire-pref-input" style="width: 70px; margin: 0 12px;" />
        <label data-l10n-id="pref-local-cache-enrich-parallel-label" />
        <html:input type="number" id="zotero-prefpane-__addonRef__-local_cache_enrich_parallel"
          preference="extensions.zotero.inspiremeta.local_cache_enrich_parallel" min="1" max="5"
          class="zinspire-pref-input" style="width: 60px; margin-left: 12px;" />
      </hbox>
      <html:p class="zinspire-pref-desc" data-l10n-id="pref-local-cache-enrich-hint"></html:p>
      <html:p id="zotero-prefpane-zoteroinspire-local_cache_enrich_info"
        class="zinspire-pref-desc"></html:p>
    </vbox>
    <vbox class="zinspire-pref-row" style="margin-top: 8px;">
      <hbox align="center">
        <label data-l10n-id="pref-local-cache-ttl-label" />
        <html:input type="number" id="zotero-prefpane-__addonRef__-local_cache_ttl_hours"
          preference="extensions.zotero.inspiremeta.local_cache_ttl_hours" min="1" max="720"
          class="zinspire-pref-input" style="width: 60px; margin-left: 8px;" />
        <label style="margin-left: 8px;" data-l10n-id="pref-local-cache-ttl-unit" />
      </hbox>
      <html:p class="zinspire-pref-desc" data-l10n-id="pref-local-cache-ttl-desc"></html:p>
    </vbox>
    <vbox class="zinspire-pref-row" style="margin-top: 8px;">
      <hbox align="center">
        <label data-l10n-id="pref-local-cache-dir-label" />
        <html:input type="text" id="zotero-prefpane-__addonRef__-local_cache_custom_dir"
          preference="extensions.zotero.inspiremeta.local_cache_custom_dir" readonly="true"
          class="zinspire-pref-input" style="flex: 1; margin-left: 8px; margin-right: 8px;" />
        <button id="zotero-prefpane-__addonRef__-browse_cache_dir" data-l10n-id="pref-local-cache-dir-browse"
          oncommand="Zotero.__addonInstance__.hooks.onPrefsEvent('browseCacheDir', { window });" />
        <button id="zotero-prefpane-__addonRef__-reset_cache_dir" data-l10n-id="pref-local-cache-dir-reset"
          oncommand="Zotero.__addonInstance__.hooks.onPrefsEvent('resetCacheDir', { window });" />
      </hbox>
      <html:p class="zinspire-pref-desc" data-l10n-id="pref-local-cache-dir-desc"></html:p>
    </vbox>
    <vbox class="zinspire-pref-row" style="margin-top: 12px;">
      <hbox align="center">
        <button id="zotero-prefpane-__addonRef__-clear_cache" data-l10n-id="pref-local-cache-clear"
          oncommand="Zotero.__addonInstance__.hooks.onPrefsEvent('clearCache', { window });" />
        <label id="zotero-prefpane-__addonRef__-cache_stats" style="margin-left: 12px; color: var(--fill-secondary, #64748b); font-size: 11px;" />
      </hbox>
    </vbox>
  </vbox>

  <!-- INSPIRE Not Found -->
  <vbox class="zinspire-pref-section">
    <html:h3 class="zinspire-pref-title" data-l10n-id="pref-nofound"></html:h3>
    <vbox class="zinspire-pref-row">
      <checkbox id="zotero-prefpane-__addonRef__-tag_enable" preference="extensions.zotero.inspiremeta.tag_enable"
        data-l10n-id="pref-nofound-enable" />
    </vbox>
    <vbox class="zinspire-pref-row" style="margin-top: 6px;">
      <hbox align="center">
        <label data-l10n-id="pref-nofound-tag-label" />
        <html:input type="text" id="zotero-prefpane-__addonRef__-tag_norecid" preference="extensions.zotero.inspiremeta.tag_norecid"
          class="zinspire-pref-input" style="flex: 1; margin-left: 8px;" />
      </hbox>
    </vbox>
  </vbox>

  <!-- Footer -->
  <html:div class="zinspire-pref-footer">
    <html:span data-l10n-id="pref-help"
      data-l10n-args='{"time": "__buildTime__","name": "__addonName__","version":"__buildVersion__"}'></html:span>
  </html:div>
</vbox>